// --------------------------------------------------------------------------
//
// Railgun
// Weapon and Pickup sprite by FrancoTieppo
// Weapon code by DBT
//
// --------------------------------------------------------------------------

Actor CompatVer30_Railgun {} // for compatibility checks

Actor RailgunPickup : CustomInventory 15607
{
	//$NotAngled
	//$Category "QCDE Weapons"
	//$Color 14
	//$Title "Railgun"
	Height 48
	Radius 20
	Scale 0.63
	Inventory.PickupSound "QC/Items/WeaponPick"
	Inventory.PickupMessage "$GOT_QCRailgun" // "Picked up a Railgun."
	Tag "$TAG_QCRailgun" // "Railgun"
	Inventory.RespawnTics 35
	States
	{
	Spawn:
		QCG7 Y 35 NoDelay A_JumpIf(ACS_NamedExecuteWithResult("MultiplayerCheck",0,0,0,0) == 2,"DMSpawn")
		Goto Idle
	DMSpawn:
		"####" "#" 0 A_ChangeFlag("DROPPED", 0)
		QCG7 Z -1 Bright ACS_NamedExecuteWithResult("QCDE_WeaponSpawned",20,args[4])
		Stop
	Idle:
		QCG7 Y -1 ACS_NamedExecuteWithResult("QCDE_WeaponSpawned",19,args[4])
		Wait
	Pickup:
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("MultiplayerCheck",0,0,0,0) == 2,"DMPickup")
		//TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("WeaponStayCheck",0,0,0,0),"WeaponStay")
		TNT1 A 0 A_GiveInventory("QCRailgun")
		TNT1 A 0
		Stop
	DMPickup:
		TNT1 A 0 A_JumpIf(ACS_NamedExecuteWithResult("WeaponStayCheck",0,0,0,0),"DMWeaponStay")
		TNT1 A 0 A_GiveInventory("QCRailgunDM")
		TNT1 A 0
		TNT1 A 0 A_TakeInventory("QCRailgun")
		TNT1 A 0
		Stop
	WeaponStay:
		TNT1 A 0 A_JumpIfInventory("QCRailgun",1,"Stay")
		TNT1 A 0 A_SpawnItemEx("QCRailgun", velx,vely,velz, velx,vely,velz, 0, SXF_NOCHECKPOSITION|SXF_ABSOLUTEPOSITION)
		Fail
	DMWeaponStay:
		TNT1 A 0 A_TakeInventory("QCRailgun")
		TNT1 A 0 A_JumpIfInventory("QCRailgunDM",1,"Stay")
		TNT1 A 0 A_SpawnItemEx("QCRailgunDM", velx,vely,velz, velx,vely,velz, 0, SXF_NOCHECKPOSITION|SXF_ABSOLUTEPOSITION)
		Fail
	Stay:
		TNT1 A 0
		Fail
	HideIndefinitely:
		TNT1 A 1 A_SetTics(CallACS("QCDE_SetWeaponRespawnTics"))
		Goto Super::HideDoomish+1
	HideDoomish:
		TNT1 A 1
		TNT1 A 1 A_SetTics(CallACS("QCDE_SetWeaponRespawnTics"))
		Goto Super::HideDoomish+1
	}
}

Actor RailgunPickupFloat : RailgunPickup 15617
{
	//$Title "Float Railgun"
	+NOGRAVITY
}


Actor QCRailGun : QCWeapon
{
	Height 48
	+FLOORCLIP
	+INVENTORY.IGNORESKILL
	+WEAPON.NOALERT
	+WEAPON.NOAUTOAIM	//rails never autoaim, but this needed for effects and sound spawners
	Weapon.SwaySpeed 2.7
	Weapon.AmmoType1 "QCSlugAmmo"
	Weapon.AmmoGive1 10
	Weapon.AmmoUse1 1
	Weapon.SelectionOrder 1400
	Inventory.PickupMessage "$GOT_QCRailGun"
	Tag "$TAG_QCRailGun"
	Obituary "$OB_QCRailGun"
	Decal "Q4RailgunGreenFull"
	Scale 0.63
	Weapon.KickBack 90
	States
	{
	Spawn:
		TNT1 A 1
		QCG7 Y 35 A_JumpIf(ACS_NamedExecuteWithResult("MultiplayerCheck",0,0,0,0) == 2,"DMSpawn")
		Goto Idle
	DMSpawn:
		QCG7 ZZZZZZZZZZZZZZZ 35 Bright
		Stop
	Idle:
		QCG7 Y -1
		Wait
	//-----------------------
	// Select/Deselect Seq
	//-----------------------
	Select:
		TNT1 A 0 ACS_NamedExecuteWithResult("QCDE_ZoomCheckSelect")
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken", 0, "Select.Zoomed")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "Select.HalfLife")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "Select.QCDE1")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "Select.ETQW")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "Select.Quake4")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "Select.Quake3")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "Select.Quake2")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "Select.Quake1")
	Select.Zoomed:
		TNT1 A 0
		Goto SelectCont
	Select.Default:
		QCG7 A 0
		Goto SelectCont
	Select.Quake1:
		Q1G7 A 0
		Goto SelectCont
	Select.Quake2:
		Q2G7 A 0
		Goto SelectCont
	Select.Quake3:
		Q3G7 A 0
		Goto SelectCont
	Select.Quake4:
		Q4G7 A 0
		Goto SelectCont
	Select.ETQW:
		QWG7 A 0
		Goto SelectCont
	Select.QCDE1:
		Q0G7 A 0
		Goto SelectCont
	Select.HalfLife:
		HLG7 A 0
		Goto SelectCont

	SelectCont:
		"####" A 0 A_PlaySound("QC/Weapons/Switch",CHAN_5,1,0,3) //Not in Weapon.UpSound because it interrupts CHAN_WEAPON sounds
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,2)
		"####" A 0 A_StopSound(CHAN_WEAPON) //stops any weapon looping sound
	SelectLooper:
		"####" A 1 A_Raise
		"####" AAA 0 A_Raise
		Loop

	Deselect:
		"####" A 0 A_StopSound(CHAN_WEAPON) //idle sound
		"####" A 0 A_TakeInventory("RailgunCharges",32767)
	DeselectLooper:
		"####" A 1 A_Lower
		"####" AAA 0 A_Lower
		Loop

	//-----------------------
	// Ready Seq
	//-----------------------
	Ready:
		TNT1 A 0 A_TakeInventory("RailgunCharges",52)
	ReadyAgain:
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "Ready.HalfLife")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "Ready.QCDE1")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "Ready.ETQW")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "Ready.Quake4")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "Ready.Quake3")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "Ready.Quake2")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "Ready.Quake1")
	Ready.Default:
		QCG7 A 0 A_PlaySound("QC/Weapons/Railgun/Idle_Default", CHAN_WEAPON, 0.4, 1, 1.25)
		Goto ReadyCont
	Ready.Quake1:
		Q1G7 A 0 A_PlaySound("QC/Weapons/Railgun/Idle_Default", CHAN_WEAPON, 0.4, 1, 1.25)
		Goto ReadyCont
	Ready.Quake2:
		Q2G7 A 0 A_PlaySound("QC/Weapons/Railgun/Idle_Quake2", CHAN_WEAPON, 0.4, 1, 1.25)
		Goto ReadyCont
	Ready.Quake3:
		Q3G7 A 0 A_PlaySound("QC/Weapons/Railgun/Idle_Quake3", CHAN_WEAPON, 0.4, 1, 1.25)
		Goto ReadyCont
	Ready.Quake4:
		Q4G7 A 0 A_PlaySound("QC/Weapons/Railgun/Idle_Quake4", CHAN_WEAPON, 0.4, 1, 1.25)
		Goto ReadyCont
	Ready.ETQW:
		QWG7 A 0 A_PlaySound("QC/Weapons/Railgun/Idle_ETQW", CHAN_WEAPON, 0.4, 1, 1.25)
		Goto ReadyCont
	Ready.QCDE1:
		Q0G7 A 0 A_PlaySound("QC/Weapons/Railgun/Idle_Default", CHAN_WEAPON, 0.4, 1, 1.25)
		Goto ReadyCont
	Ready.HalfLife:
		HLG7 A 0 A_PlaySound("QC/Weapons/Railgun/Idle_HalfLife", CHAN_WEAPON, 0.4, 1, 1.25)
		Goto ReadyCont

	ReadyCont:
		"####" A 0 A_JumpIfInventory("Instagib", 1, "ReadyContRailjump")
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" B 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" B 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" B 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" B 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" B 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" B 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" C 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" C 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" C 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" C 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" C 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" C 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" D 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" D 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" D 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" D 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" D 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" D 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" E 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" E 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" E 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" E 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" E 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" E 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" F 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" F 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" F 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" F 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" F 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" F 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" G 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" G 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" G 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" G 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" G 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" G 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" H 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" H 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" H 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" H 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" H 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" H 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" A 0 A_JumpIfInventory("QCRailgunSkin", 7, "ReadyCont") // Loop the animation immediately for HL skin
		"####" I 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" I 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" I 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" I 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" I 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" I 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady(WRF_NOSECONDARY)
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady(WRF_NOSECONDARY)
		Loop

	ReadyContRailjump: // same as above, but alt fire is allowed
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady
		"####" B 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" B 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" B 1 A_WeaponReady
		"####" B 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" B 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" B 1 A_WeaponReady
		"####" C 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" C 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" C 1 A_WeaponReady
		"####" C 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" C 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" C 1 A_WeaponReady
		"####" D 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" D 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" D 1 A_WeaponReady
		"####" D 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" D 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" D 1 A_WeaponReady
		"####" E 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" E 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" E 1 A_WeaponReady
		"####" E 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" E 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" E 1 A_WeaponReady
		"####" F 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" F 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" F 1 A_WeaponReady
		"####" F 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" F 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" F 1 A_WeaponReady
		"####" G 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" G 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" G 1 A_WeaponReady
		"####" G 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" G 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" G 1 A_WeaponReady
		"####" H 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" H 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" H 1 A_WeaponReady
		"####" H 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" H 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" H 1 A_WeaponReady
		"####" A 0 A_JumpIfInventory("QCRailgunSkin", 7, "ReadyContRailjump") // Loop the animation immediately for HL skin
		"####" I 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" I 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" I 1 A_WeaponReady
		"####" I 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" I 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" I 1 A_WeaponReady
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"ReadyZoomed")
		"####" A 1 A_WeaponReady
		Loop

	ReadyZoomed:
		TNT1 A 0 A_JumpIfInventory("DMToken",1,"ReadyZoomedDM")
		TNT1 A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"Ready")
		TNT1 A 0 A_JumpIfInventory("RailgunCharges",52,"ReadyZoomedCharged")
		TNT1 A 1 Bright A_WeaponReady(WRF_NOBOB|WRF_NOSECONDARY)
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		Loop

	ReadyZoomedCharged:
		TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/ChargeFull", CHAN_5, 1.0, 0, 15) //only you hear it
	ReadyZoomedChargedLoop:
		TNT1 A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"Ready")
		TNT1 A 1 Bright A_WeaponReady(WRF_NOBOB|WRF_NOSECONDARY)
		Loop

	ReadyZoomedDM:
		TNT1 A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"Ready")
		TNT1 A 1 Bright A_WeaponReady(WRF_NOBOB|WRF_NOSECONDARY)
		Loop


		ReadyCantFire:
			"####" A 0 A_StopSound(CHAN_WEAPON)
			"####" A 0 A_TakeInventory("RailgunCharges",32767)
		RCFLooper:
			"####" A 4 A_WeaponReady(WRF_NOFIRE)
			"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"RCFLooper")
			Goto Ready

	//-----------------------
	// Fire Seq
	//-----------------------
	Fire:
		"####" A 0 A_JumpIfInventory("NoWeaponFireToken",1,"ReadyCantFire")
		"####" A 0 A_AlertMonsters
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"FireZoomed")

	RegularFireSequence:		//52 tics, ~1.5 sec (1.4857 sec)
		"####" A 0 A_GunFlash("PrimaryFlash")

		/*QCG7 JK 1 Bright	//animation timing reference
		"####" L 1
		"####" M 2
		"####" N 20
		"####" OPQRSTUVW 3
		Goto Ready*/

		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" J 1 Offset(9,37) Bright A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" K 1 Offset(14,45) Bright A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" L 1 Offset(17,48) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" M 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" M 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" N 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" O 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" O 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" O 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" P 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" P 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" P 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" Q 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" Q 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" Q 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" R 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" R 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" R 1 Offset(19,51) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" S 1 Offset(18,50) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" S 1 Offset(17,49) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" S 1 Offset(16,48) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" T 1 Offset(14,46) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" T 1 Offset(12,44) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" T 1 Offset(10,42) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" U 1 Offset(8,40) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" U 1 Offset(7,39) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" U 1 Offset(6,38) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" V 1 Offset(5,37) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" V 1 Offset(4,36) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" V 1 Offset(3,35) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" W 1 Offset(2,34) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" W 1 Offset(1,33) A_GiveInventory("RailgunTicCounter",1)
		"####" A 0 A_JumpIfInventory("WeaponZoomedToken",1,"DoTheMathToZoom")
		"####" W 1 Offset(0,32) A_GiveInventory("RailgunTicCounter",1)

		"####" A 0 A_TakeInventory("RailgunTicCounter",32767)
		Goto ReadyAgain

	PrimaryFlash: //Attacks doer
		TNT1 A 0 A_JumpIfInventory("DMToken",1,"PerformDM")
		Goto PerformSP

		PerformSP:
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "PerformSP.HalfLife")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "PerformSP.Default")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "PerformSP.ETQW")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "PerformSP.Quake4")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "PerformSP.Quake3")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "PerformSP.Quake2")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "PerformSP.Quake1")
		PerformSP.Default:
			TNT1 A 0 A_RailAttack(random(20,24)*10,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT,0,"RailgunPuff",0,0,0,0,6.0,1.0,"RailgunTrail")
			Goto PerformSPCont
		PerformSP.Quake1:
			TNT1 A 0 A_RailAttack(random(20,24)*10,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT,0,"RailgunPuff_Quake1",0,0,0,0,6.0,1.0,"RailgunTrail_Quake1")
			Goto PerformSPCont
		PerformSP.Quake2:
			TNT1 A 0 A_RailAttack(random(20,24)*10,2,1,"#4793a3","#cecfd1",RGF_SILENT|RGF_FULLBRIGHT,0,"RailgunPuff_Quake2",0,0,0,0,1.0,1.0)
			Goto PerformSPCont
		PerformSP.Quake3:
			TNT1 A 0 A_RailAttack(random(20,24)*10,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT,0,"RailgunPuff",0,0,0,0,6.0,1.0,"RailgunTrail_Quake3")
			Goto PerformSPCont
		PerformSP.Quake4:
			TNT1 A 0 A_RailAttack(random(20,24)*10,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT,0,"RailgunPuff_Quake4",0,0,0,0,6.0,1.0,"RailgunTrail_Quake4")
			Goto PerformSPCont
		PerformSP.ETQW:
			TNT1 A 0 A_RailAttack(random(20,24)*10,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT,0,"RailgunPuff_ETQW",0,0,0,0,6.0,1.0,"RailgunTrail_ETQW")
			Goto PerformSPCont
		PerformSP.HalfLife:
			TNT1 A 0 A_RailAttack(random(20,24)*10,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT,0,"RailgunPuff_HalfLife",0,0,0,0,6.0,1.0,"RailgunTrail_HalfLife")
			Goto PerformSPCont

		PerformSPCont:
			TNT1 A 0 A_JumpIfInventory("RG_UG_Pierce",1,"AddPierceBeam")
			Goto FlashCheckSound

			AddPierceBeam:
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "AddPierceBeam.HalfLife")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "AddPierceBeam.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "AddPierceBeam.ETQW")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "AddPierceBeam.Quake4")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "AddPierceBeam.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "AddPierceBeam.Quake2")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "AddPierceBeam.Quake1")
			AddPierceBeam.Default:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile",0,false,1,0,0,0)
				Goto FlashCheckSound
			AddPierceBeam.Quake1:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_Quake1",0,false,1,0,0,0)
				Goto FlashCheckSound
			AddPierceBeam.Quake2:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_Quake2",0,false,1,0,0,0)
				Goto FlashCheckSound
			AddPierceBeam.Quake4:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_Quake4",0,false,1,0,0,0)
				Goto FlashCheckSound
			AddPierceBeam.ETQW:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_ETQW",0,false,1,0,0,0)
				Goto FlashCheckSound
			AddPierceBeam.HalfLife:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_HalfLife",0,false,1,0,0,0)
				Goto FlashCheckSound

		PerformDM:
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "PerformDM.HalfLife")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "PerformDM.Default")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "PerformDM.ETQW")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "PerformDM.Quake4")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "PerformDM.Quake3")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "PerformDM.Quake2")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "PerformDM.Quake1")
		PerformDM.Default:
			TNT1 A 0 A_RailAttack(80,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM",0,0,0,0,6.0,1.0,"RailgunTrail")
			Goto PerformDMCont
		PerformDM.Quake1:
			TNT1 A 0 A_RailAttack(80,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_Quake1",0,0,0,0,6.0,1.0,"RailgunTrail_Quake1")
			Goto PerformDMCont
		PerformDM.Quake2:
			TNT1 A 0 A_RailAttack(80,2,1,"#4793a3","#cecfd1",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_Quake2",0,0,0,0,1.0,1.0)
			Goto PerformDMCont
		PerformDM.Quake3:
			TNT1 A 0 A_RailAttack(80,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM",0,0,0,0,6.0,1.0,"RailgunTrail_Quake3")
			Goto PerformDMCont
		PerformDM.Quake4:
			TNT1 A 0 A_RailAttack(80,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_Quake4",0,0,0,0,6.0,1.0,"RailgunTrail_Quake4")
			Goto PerformDMCont
		PerformDM.ETQW:
			TNT1 A 0 A_RailAttack(80,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_ETQW",0,0,0,0,6.0,1.0,"RailgunTrail_ETQW")
			Goto PerformDMCont
		PerformDM.HalfLife:
			TNT1 A 0 A_RailAttack(80,2,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_HalfLife",0,0,0,0,6.0,1.0,"RailgunTrail_HalfLife")
			Goto PerformDMCont

		PerformDMCont:
			//Medals start
			TNT1 A 1
			TNT1 A 0 A_GiveInventory("AimWellToken",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE|GIF_SKIPOWNER)
			//Medals end
			Goto FlashCheckSound

		FlashCheckSound:
			TNT1 A 0 A_JumpIfInventory("PowerQuad",1,"QuadSound")
			TNT1 A 0 A_JumpIfInventory("PowerTerminatorArtifact",1,"QuadSound")
			Goto NormalSound

			NormalSound:
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 7, "NormalSound.HalfLife")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 6, "NormalSound.Default")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 5, "NormalSound.ETQW")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 4, "NormalSound.Quake4")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 3, "NormalSound.Quake3")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 2, "NormalSound.Quake2")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 1, "NormalSound.Quake1")
			NormalSound.Default:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Default", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			NormalSound.Quake1:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Quake1", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			NormalSound.Quake2:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Quake2", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			NormalSound.Quake3:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Quake3", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			NormalSound.Quake4:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Quake4", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			NormalSound.ETQW:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Fire_ETQW", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			NormalSound.HalfLife:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Fire_HalfLife", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder

			QuadSound:
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 7, "QuadSound.HalfLife")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 6, "QuadSound.Default")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 5, "QuadSound.ETQW")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 4, "QuadSound.Quake4")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 3, "QuadSound.Quake3")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 2, "QuadSound.Quake2")
				"####" A 0 A_JumpIfInventory("QCRailgunSkin", 1, "QuadSound.Quake1")
			QuadSound.Default:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Default", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			QuadSound.Quake1:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Quake1", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			QuadSound.Quake2:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Quake2", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			QuadSound.Quake3:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Quake3", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			QuadSound.Quake4:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Quake4", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			QuadSound.ETQW:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_ETQW", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder
			QuadSound.HalfLife:
				"####" A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_HalfLife", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnder

	FlashEnder:
		//Medals start
		TNT1 A 0 A_GiveInventory("RGFiredGiver",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE|GIF_SKIPOWNER)
		TNT1 A 0 ACS_NamedExecuteAlways("ComboKillTokenGiver",0)
		TNT1 A 0 ACS_NamedExecuteAlways("QCDE_Impressive",0)
		//Medals end
		TNT1 A 0 A_JumpIfInventory("WepNoFlashToken",1,2)
		TNT1 A 0 A_SetBlend("Green",0.14,15)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_RailAttack(0,2,0,"None","None",RGF_SILENT|RGF_FULLBRIGHT,0,"DummyPuff",0,0,1,0,70.0,1.0,"RailgunSmoke")
		TNT1 A 0 A_FireCustomMissile("RailgunWhoosher",0,false,1,0,FPF_NOUNLAGGED|FPF_SKIPOWNER,0)				//to play "whoosh" sound when passes by
		TNT1 A 0 A_JumpIfInventory("WepNoRecoilToken",1,"FlashEnderNoRecoil")
		TNT1 A 2 A_SetPitch(pitch-5.0)
		TNT1 AAAAA 1 A_SetPitch(pitch+1)
		Stop
	FlashEnderNoRecoil:
		TNT1 A 1
		Stop



	//-----------------------
	// Zoom Fire
	//-----------------------

	FireZoomed:
		TNT1 A 0 A_JumpIfInventory("DMToken",1,"ZoomedFireSequenceDM")

	ZoomedFireSequence:
		TNT1 A 0 A_GunFlash("ZoomedFlash")

		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 0 A_GiveInventory("RailgunCharges",1)
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")

		TNT1 A 0 A_TakeInventory("RailgunTicCounter",32767)
		Goto ReadyAgain


	ZoomedFireSequenceDM:
		TNT1 A 0 A_GunFlash("ZoomedFlash")

		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")
		TNT1 A 1 Bright A_GiveInventory("RailgunTicCounter",1)
		TNT1 A 0 A_JumpIfInventory("WeaponZoomedToken",-1,"DoTheMathFromZoom")

		TNT1 A 0 A_TakeInventory("RailgunTicCounter",32767)
		Goto ReadyAgain

	ZoomedFlash: //Attacks doer
		TNT1 A 0 A_JumpIfInventory("DMToken",1,"PerformDMZoomed")
		Goto PerformSPZoomed

		PerformSPZoomed:
			TNT1 A 0 A_JumpIfInventory("RailgunCharges",52,"PerformSPZoomedCharged")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "PerformSPZoomed.HalfLife")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "PerformSPZoomed.Default")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "PerformSPZoomed.ETQW")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "PerformSPZoomed.Quake4")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "PerformSPZoomed.Quake3")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "PerformSPZoomed.Quake2")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "PerformSPZoomed.Quake1")
		PerformSPZoomed.Default:
			TNT1 A 0 A_RailAttack(random(20,25)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff",0,0,0,0,6.0,1.0,"RailgunTrail")
			Goto PerformSPZoomedCont
		PerformSPZoomed.Quake1:
			TNT1 A 0 A_RailAttack(random(20,25)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_Quake1",0,0,0,0,6.0,1.0,"RailgunTrail_Quake1")
			Goto PerformSPZoomedCont
		PerformSPZoomed.Quake2:
			TNT1 A 0 A_RailAttack(random(20,25)*10,0,1,"#4793a3","#cecfd1",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_Quake2",0,0,0,0,1.0,1.0)
			Goto PerformSPZoomedCont
		PerformSPZoomed.Quake3:
			TNT1 A 0 A_RailAttack(random(20,25)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff",0,0,0,0,6.0,1.0,"RailgunTrail_Quake3")
			Goto PerformSPZoomedCont
		PerformSPZoomed.Quake4:
			TNT1 A 0 A_RailAttack(random(20,25)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_Quake4",0,0,0,0,6.0,1.0,"RailgunTrail_Quake4")
			Goto PerformSPZoomedCont
		PerformSPZoomed.ETQW:
			TNT1 A 0 A_RailAttack(random(20,25)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_ETQW",0,0,0,0,6.0,1.0,"RailgunTrail_ETQW")
			Goto PerformSPZoomedCont
		PerformSPZoomed.HalfLife:
			TNT1 A 0 A_RailAttack(random(20,25)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_HalfLife",0,0,0,0,6.0,1.0,"RailgunTrail_HalfLife")
			Goto PerformSPZoomedCont

		PerformSPZoomedCont:
			TNT1 A 0 A_JumpIfInventory("RG_UG_Explosive",1,"AddExplosiveWeak")
			TNT1 A 0 A_JumpIfInventory("RG_UG_Pierce",1,"AddPierceBeamZoomedWeak")
			Goto FlashZoomedCheckSound

			AddExplosiveWeak:
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "AddExplosiveWeak.HalfLife")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "AddExplosiveWeak.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "AddExplosiveWeak.ETQW")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "AddExplosiveWeak.Quake4")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "AddExplosiveWeak.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "AddExplosiveWeak.Quake2")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "AddExplosiveWeak.Quake1")
			AddExplosiveWeak.Default:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidWeak",0,false,0)
				Goto AddExplosiveWeakCont
			AddExplosiveWeak.Quake1:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidWeak_Quake1",0,false,0)
				Goto AddExplosiveWeakCont
			AddExplosiveWeak.Quake2:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidWeak_Quake2",0,false,0)
				Goto AddExplosiveWeakCont
			AddExplosiveWeak.Quake4:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidWeak_Quake4",0,false,0)
				Goto AddExplosiveWeakCont
			AddExplosiveWeak.ETQW:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidWeak_ETQW",0,false,0)
				Goto AddExplosiveWeakCont
			AddExplosiveWeak.HalfLife:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidWeak_HalfLife",0,false,0)
				Goto AddExplosiveWeakCont
			AddExplosiveWeakCont:
				TNT1 A 0 A_RailAttack(random(10,15)*10,0,false,"none","none",RGF_SILENT|RGF_FULLBRIGHT)
				TNT1 A 0 A_JumpIfInventory("RG_UG_Pierce",1,"AddPierceBeamZoomedWeak")
				Goto FlashZoomedCheckSound

			AddPierceBeamZoomedWeak:
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "AddPierceBeamZoomedWeak.HalfLife")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "AddPierceBeamZoomedWeak.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "AddPierceBeamZoomedWeak.ETQW")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "AddPierceBeamZoomedWeak.Quake4")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "AddPierceBeamZoomedWeak.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "AddPierceBeamZoomedWeak.Quake2")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "AddPierceBeamZoomedWeak.Quake1")
			AddPierceBeamZoomedWeak.Default:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedWeak.Quake1:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_Quake1",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedWeak.Quake2:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_Quake2",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedWeak.Quake4:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_Quake4",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedWeak.ETQW:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_ETQW",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedWeak.HalfLife:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectile_HalfLife",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound


		PerformSPZoomedCharged:
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "PerformSPZoomedCharged.HalfLife")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "PerformSPZoomedCharged.Default")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "PerformSPZoomedCharged.ETQW")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "PerformSPZoomedCharged.Quake4")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "PerformSPZoomedCharged.Quake3")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "PerformSPZoomedCharged.Quake2")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "PerformSPZoomedCharged.Quake1")
		PerformSPZoomedCharged.Default:
			TNT1 A 0 A_RailAttack(random(30,40)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff",0,0,0,0,6.0,1.0,"RailgunTrail")
			Goto PerformSPZoomedChargedCont
		PerformSPZoomedCharged.Quake1:
			TNT1 A 0 A_RailAttack(random(30,40)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_Quake1",0,0,0,0,6.0,1.0,"RailgunTrail_Quake1")
			Goto PerformSPZoomedChargedCont
		PerformSPZoomedCharged.Quake2:
			TNT1 A 0 A_RailAttack(random(30,40)*10,0,1,"#4793a3","#cecfd1",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_Quake2",0,0,0,0,1.0,1.0)
			Goto PerformSPZoomedChargedCont
		PerformSPZoomedCharged.Quake3:
			TNT1 A 0 A_RailAttack(random(30,40)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff",0,0,0,0,6.0,1.0,"RailgunTrail_Quake3")
			Goto PerformSPZoomedChargedCont
		PerformSPZoomedCharged.Quake4:
			TNT1 A 0 A_RailAttack(random(30,40)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_Quake4",0,0,0,0,6.0,1.0,"RailgunTrail_Quake4")
			Goto PerformSPZoomedChargedCont
		PerformSPZoomedCharged.ETQW:
			TNT1 A 0 A_RailAttack(random(30,40)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_ETQW",0,0,0,0,6.0,1.0,"RailgunTrail_ETQW")
			Goto PerformSPZoomedChargedCont
		PerformSPZoomedCharged.HalfLife:
			TNT1 A 0 A_RailAttack(random(30,40)*10,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_HalfLife",0,0,0,0,6.0,1.0,"RailgunTrail_HalfLife")
			Goto PerformSPZoomedChargedCont

		PerformSPZoomedChargedCont:
			TNT1 A 0 A_JumpIfInventory("RG_UG_Explosive",1,"AddExplosiveStrong")
			TNT1 A 0 A_JumpIfInventory("RG_UG_Pierce",1,"AddPierceBeamZoomedStrong")
			Goto FlashZoomedCheckSound

			AddExplosiveStrong:
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "AddExplosiveStrong.HalfLife")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "AddExplosiveStrong.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "AddExplosiveStrong.ETQW")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "AddExplosiveStrong.Quake4")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "AddExplosiveStrong.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "AddExplosiveStrong.Quake2")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "AddExplosiveStrong.Quake1")
			AddExplosiveStrong.Default:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidStrong",0,false,0)
				Goto AddExplosiveStrongCont
			AddExplosiveStrong.Quake1:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidStrong_Quake1",0,false,0)
				Goto AddExplosiveStrongCont
			AddExplosiveStrong.Quake2:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidStrong_Quake2",0,false,0)
				Goto AddExplosiveStrongCont
			AddExplosiveStrong.Quake4:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidStrong_Quake4",0,false,0)
				Goto AddExplosiveStrongCont
			AddExplosiveStrong.ETQW:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidStrong_ETQW",0,false,0)
				Goto AddExplosiveStrongCont
			AddExplosiveStrong.HalfLife:
				TNT1 A 0 A_FireCustomMissile("RailgunExplosivePuffoidStrong_HalfLife",0,false,0)
				Goto AddExplosiveStrongCont
			AddExplosiveStrongCont:
				TNT1 A 0 A_RailAttack(random(20,25)*10,0,false,"none","none",RGF_SILENT|RGF_FULLBRIGHT)
				TNT1 A 0 A_JumpIfInventory("RG_UG_Pierce",1,"AddPierceBeamZoomedStrong")
				Goto FlashZoomedCheckSound

			AddPierceBeamZoomedStrong:
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "AddPierceBeamZoomedStrong.HalfLife")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "AddPierceBeamZoomedStrong.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "AddPierceBeamZoomedStrong.ETQW")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "AddPierceBeamZoomedStrong.Quake4")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "AddPierceBeamZoomedStrong.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "AddPierceBeamZoomedStrong.Quake2")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "AddPierceBeamZoomedStrong.Quake1")
			AddPierceBeamZoomedStrong.Default:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectileStrong",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedStrong.Quake1:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectileStrong_Quake1",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedStrong.Quake2:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectileStrong_Quake2",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedStrong.Quake4:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectileStrong_Quake4",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedStrong.ETQW:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectileStrong_ETQW",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound
			AddPierceBeamZoomedStrong.HalfLife:
				TNT1 A 0 A_FireCustomMissile("RGPierceBeamProjectileStrong_HalfLife",0,false,1,0,0,0)
				Goto FlashZoomedCheckSound


		PerformDMZoomed:
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "PerformDMZoomed.HalfLife")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "PerformDMZoomed.Default")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "PerformDMZoomed.ETQW")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "PerformDMZoomed.Quake4")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "PerformDMZoomed.Quake3")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "PerformDMZoomed.Quake2")
			TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "PerformDMZoomed.Quake1")
		PerformDMZoomed.Default:
			TNT1 A 0 A_RailAttack(80,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM",0,0,0,0,6.0,1.0,"RailgunTrail")
			Goto PerformDMZoomedCont
		PerformDMZoomed.Quake1:
			TNT1 A 0 A_RailAttack(80,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_Quake1",0,0,0,0,6.0,1.0,"RailgunTrail_Quake1")
			Goto PerformDMZoomedCont
		PerformDMZoomed.Quake2:
			TNT1 A 0 A_RailAttack(80,0,1,"#4793a3","#cecfd1",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_Quake2",0,0,0,0,1.0,1.0)
			Goto PerformDMZoomedCont
		PerformDMZoomed.Quake3:
			TNT1 A 0 A_RailAttack(80,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM",0,0,0,0,6.0,1.0,"RailgunTrail_Quake3")
			Goto PerformDMZoomedCont
		PerformDMZoomed.Quake4:
			TNT1 A 0 A_RailAttack(80,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_Quake4",0,0,0,0,6.0,1.0,"RailgunTrail_Quake4")
			Goto PerformDMZoomedCont
		PerformDMZoomed.ETQW:
			TNT1 A 0 A_RailAttack(80,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_ETQW",0,0,0,0,6.0,1.0,"RailgunTrail_ETQW")
			Goto PerformDMZoomedCont
		PerformDMZoomed.HalfLife:
			TNT1 A 0 A_RailAttack(80,0,1,"None","None",RGF_SILENT|RGF_FULLBRIGHT|RGF_NORANDOMPUFFZ,0,"RailgunPuff_DM_HalfLife",0,0,0,0,6.0,1.0,"RailgunTrail_HalfLife")
			Goto PerformDMZoomedCont

		PerformDMZoomedCont:
			//Medals start
			TNT1 A 1
			TNT1 A 0 A_GiveInventory("AimWellToken",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE|GIF_SKIPOWNER)
			//Medals end
			Goto FlashZoomedCheckSound

		FlashZoomedCheckSound:
			TNT1 A 0 A_JumpIfInventory("PowerQuad",1,"QuadSoundZoomed")
			TNT1 A 0 A_JumpIfInventory("PowerTerminatorArtifact",1,"QuadSoundZoomed")
			Goto NormalSoundZoomed

			NormalSoundZoomed:
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "NormalSoundZoomed.HalfLife")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "NormalSoundZoomed.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "NormalSoundZoomed.ETQW")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "NormalSoundZoomed.Quake4")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "NormalSoundZoomed.Quake3")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "NormalSoundZoomed.Quake2")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "NormalSoundZoomed.Quake1")
			NormalSoundZoomed.Default:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Default", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			NormalSoundZoomed.Quake1:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Quake1", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			NormalSoundZoomed.Quake2:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Quake2", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			NormalSoundZoomed.Quake3:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Quake3", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			NormalSoundZoomed.Quake4:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Fire_Quake4", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			NormalSoundZoomed.ETQW:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Fire_ETQW", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			NormalSoundZoomed.HalfLife:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Fire_HalfLife", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed

			QuadSoundZoomed:
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "QuadSoundZoomed.HalfLife")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "QuadSoundZoomed.Default")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "QuadSoundZoomed.ETQW")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "QuadSoundZoomed.Quake4")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "QuadSoundZoomed.Quake3")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "QuadSoundZoomed.Quake2")
				TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "QuadSoundZoomed.Quake1")
			QuadSoundZoomed.Default:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Default", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			QuadSoundZoomed.Quake1:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Quake1", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			QuadSoundZoomed.Quake2:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Quake2", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			QuadSoundZoomed.Quake3:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Quake3", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			QuadSoundZoomed.Quake4:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_Quake4", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			QuadSoundZoomed.ETQW:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_ETQW", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed
			QuadSoundZoomed.HalfLife:
				TNT1 A 0 A_PlaySound("QC/Weapons/Railgun/Quad/Fire_HalfLife", CHAN_WEAPON, 1.0, 0)
				Goto FlashEnderZoomed

	FlashEnderZoomed:
		TNT1 A 0 A_TakeInventory("RailgunCharges",32767)
		//Medals start
		TNT1 A 0 A_GiveInventory("RGFiredGiver",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE|GIF_SKIPOWNER)
		TNT1 A 0 ACS_NamedExecuteAlways("ComboKillTokenGiver",0)
		TNT1 A 0 ACS_NamedExecuteAlways("QCDE_Impressive",0)
		//Medals end
		TNT1 A 0 A_JumpIfInventory("WepNoFlashToken",1,2)
		TNT1 A 0 A_SetBlend("Green",0.14,15)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_RailAttack(0,0,0,"None","None",RGF_SILENT|RGF_FULLBRIGHT,0,"DummyPuff",0,0,1,0,70.0,1.0,"RailgunSmoke")
		TNT1 A 0 A_FireCustomMissile("RailgunWhoosher",0,false,1,0,FPF_NOUNLAGGED|FPF_SKIPOWNER,0)
		TNT1 A 0 A_JumpIfInventory("WepNoRecoilToken",1,"FlashEnderNoRecoil")
		TNT1 A 2 A_SetPitch(pitch-2.5)
		TNT1 AAAAA 1 A_SetPitch(pitch+0.5)
		Stop

	DoTheMathFromZoom:
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 7, "DoTheMathFromZoom.HalfLife")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 6, "DoTheMathFromZoom.QCDE1")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 5, "DoTheMathFromZoom.ETQW")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 4, "DoTheMathFromZoom.Quake4")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 3, "DoTheMathFromZoom.Quake3")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 2, "DoTheMathFromZoom.Quake2")
		TNT1 A 0 A_JumpIfInventory("QCRailgunSkin", 1, "DoTheMathFromZoom.Quake1")
	DoTheMathFromZoom.Default:
		QCG7 A 0
		Goto DoTheMathFromZoomCont
	DoTheMathFromZoom.Quake1:
		Q1G7 A 0
		Goto DoTheMathFromZoomCont
	DoTheMathFromZoom.Quake2:
		Q2G7 A 0
		Goto DoTheMathFromZoomCont
	DoTheMathFromZoom.Quake3:
		Q3G7 A 0
		Goto DoTheMathFromZoomCont
	DoTheMathFromZoom.Quake4:
		Q4G7 A 0
		Goto DoTheMathFromZoomCont
	DoTheMathFromZoom.ETQW:
		QWG7 A 0
		Goto DoTheMathFromZoomCont
	DoTheMathFromZoom.QCDE1:
		Q0G7 A 0
		Goto DoTheMathFromZoomCont
	DoTheMathFromZoom.HalfLife:
		HLG7 A 0
		Goto DoTheMathFromZoomCont

	DoTheMathFromZoomCont:
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",51,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",50,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",49,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",48,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",47,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",46,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",45,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",44,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",43,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",42,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",41,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",40,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",39,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",38,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",37,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",36,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",35,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",34,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",33,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",32,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",31,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",30,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",29,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",28,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",27,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",26,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",25,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",24,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",23,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",22,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",21,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",20,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",19,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",18,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",17,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",16,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",15,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",14,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",13,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",12,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",11,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",10,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",9,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",8,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",7,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",6,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",5,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",4,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",3,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",2,52)
		"####" A 0 A_JumpIfInventory("RailgunTicCounter",1,52)//from 1st jump, this is line 50

		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+106
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+104
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+102
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+100
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+98
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+96
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+94
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+92
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+90
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+88
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+86
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+84
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+82
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+80
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+78
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+76
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+74
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+72
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+70
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+68
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+66
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+64
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+62
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+60
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+58
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+56
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+54
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+52
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+50
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+48
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+46
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+44
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+42
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+40
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+38
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+36
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+34
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+32
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+30
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+28
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+26
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+24
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+22
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+20
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+18
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+16
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+14
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+12
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE) 		Goto RegularFireSequence+10
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+8
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+6
		"####" A 0 A_GunFlash("ClearFromZoomed",GFF_NOEXTCHANGE)		Goto RegularFireSequence+4

	ClearFromZoomed:
		"####" A 0 A_TakeInventory("RailgunCharges",32767)
		Stop

	DoTheMathToZoom:
		TNT1 A 0 A_JumpIfInventory("DMToken",1,"DoTheMathToZoomDM")

		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",51,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",50,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",49,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",48,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",47,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",46,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",45,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",44,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",43,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",42,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",41,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",40,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",39,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",38,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",37,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",36,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",35,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",34,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",33,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",32,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",31,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",30,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",29,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",28,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",27,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",26,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",25,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",24,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",23,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",22,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",21,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",20,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",19,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",18,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",17,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",16,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",15,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",14,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",13,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",12,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",11,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",10,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",9,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",8,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",7,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",6,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",5,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",4,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",3,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",2,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",1,52)//from 1st jump, this is line 50

		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+157
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+154
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+151
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+148
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+145
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+142
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+139
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+136
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+133
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+130
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+127
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+124
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+121
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+118
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+115
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+112
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+109
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+106
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+103
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+100
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+97
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+94
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+91
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+88
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+85
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+82
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+79
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+76
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+73
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+70
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+67
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+64
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+61
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+58
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+55
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+52
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+49
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+46
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+43
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+40
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+37
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+34
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+31
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+28
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+25
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+22
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+29
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+16
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE) 		Goto ZoomedFireSequence+13
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+10
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+7
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequence+4

	DoTheMathToZoomDM:
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",51,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",50,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",49,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",48,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",47,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",46,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",45,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",44,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",43,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",42,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",41,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",40,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",39,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",38,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",37,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",36,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",35,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",34,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",33,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",32,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",31,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",30,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",29,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",28,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",27,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",26,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",25,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",24,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",23,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",22,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",21,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",20,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",19,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",18,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",17,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",16,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",15,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",14,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",13,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",12,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",11,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",10,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",9,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",8,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",7,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",6,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",5,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",4,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",3,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",2,52)
		TNT1 A 0 A_JumpIfInventory("RailgunTicCounter",1,52)//from 1st jump, this is line 50

		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+106
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+104
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+102
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+100
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+98
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+96
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+94
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+92
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+90
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+88
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+86
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+84
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+82
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+80
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+78
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+76
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+74
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+72
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+70
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+68
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+66
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+64
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+62
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+60
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+58
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+56
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+54
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+52
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+50
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+48
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+46
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+44
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+42
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+40
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+38
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+36
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+34
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+32
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+30
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+28
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+26
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+24
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+22
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+20
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+18
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+16
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+14
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+12
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE) 		Goto ZoomedFireSequenceDM+10
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+8
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+6
		TNT1 A 0 A_GunFlash("ClearToZoomed",GFF_NOEXTCHANGE)		Goto ZoomedFireSequenceDM+4

	ClearToZoomed:
		TNT1 A 0
		Stop


	AltFire:
		"####" "#" 0 A_ChangeVelocity(15 * -cos(pitch), 0, 15 * sin(pitch), CVF_RELATIVE)
		"####" "#" 0 A_PlaySound("QC/Abilities/Freeman/Exhaust", CHAN_5, 0.75)
		"####" "#" 0 A_FireCustomMissile("RailgunJumpReflector", 0, false, 1, 5, FPF_NOUNLAGGED|FPF_SKIPOWNER)
		"####" A 1 Offset(9,37)
		"####" A 1 Offset(14,45)
		"####" L 1 Offset(17,48)
		"####" M 1 Offset(19,51)
		"####" M 1 Offset(19,51)
		"####" N 1 Offset(19,51)
		"####" N 1 Offset(19,51)
		"####" O 1 Offset(19,51)
		"####" O 1 Offset(19,51)
		"####" P 1 Offset(19,51)
		"####" P 1 Offset(19,51)
		"####" Q 1 Offset(19,51)
		"####" Q 1 Offset(19,51)
		"####" R 1 Offset(19,51)
		"####" R 1 Offset(19,51)
		"####" S 1 Offset(18,50)
		"####" S 1 Offset(17,49)
		"####" S 1 Offset(16,48)
		"####" T 1 Offset(14,46)
		"####" T 1 Offset(12,44)
		"####" T 1 Offset(10,42)
		"####" U 1 Offset(8,40)
		"####" U 1 Offset(7,39)
		"####" U 1 Offset(6,38)
		"####" V 1 Offset(5,37)
		"####" V 1 Offset(4,36)
		"####" V 1 Offset(3,35)
		"####" W 1 Offset(2,34)
		"####" W 1 Offset(1,33)
		"####" W 1 Offset(0,32)
		Goto ReadyAgain
	}
}

Actor RailgunCharges : Inventory
{
	+SERVERNETID
	Inventory.MaxAmount 52
	Inventory.InterHubAmount 0
}


Actor RailgunJumpReflector
{
	+NOGRAVITY
	Projectile
	Damage 1
	Speed 20
	radius 10
	height 20
	ProjectileKickback 10000
	RenderStyle Add
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Blast(BF_NOIMPACTDAMAGE, 255, 32)
		FX01 A 1 A_FadeOut(0.05)
		Loop
	}
}

Actor RailgunTrail
{
	+NOINTERACTION +NOTONAUTOMAP
	+FORCEXYBILLBOARD
	+CLIENTSIDEONLY +NONETID
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0,1,0]"
	Scale 0.07
	States
	{
	Spawn:
		FX01 AA 1 Bright
		FX01 A 1 Bright A_FadeOut(0.065)
		Wait
	}
}

Actor RailgunTrail_Quake1 : RailgunTrail
{
	Translation "0:255=%[0,0,0]:[1.5,0.0,0.0]"
}

Actor RailgunTrail_Quake3 : RailgunTrail
{
	Scale 0.04
}

Actor RailgunTrail_Quake4 : RailgunTrail
{
	Translation "0:255=%[0,0,0]:[0.24,0.99,1.0]"
}

Actor RailgunTrail_ETQW : RailgunTrail
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"
}

Actor RailgunTrail_HalfLife : RailgunTrail
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"
	Scale 0.04
}


Actor RailgunWhoosher : FastProjectile
{
	Projectile
	+DONTSPLASH
	+NOEXTREMEDEATH
	+SERVERNETID
	damage 0
	radius 2
	height 2
	speed 125
	renderstyle ADD
	alpha 0.9
	scale 0.13
	states
	{
	Spawn:
		TRAC A 1
		TRAC A 70 BRIGHT A_PlaySound("QC/Weapons/Railgun/Whoosh",CHAN_5,1.0,false,3.0)
		Stop
	Death:
		TNT1 A 1 A_StopSound(CHAN_5)
		Stop
	XDeath:
		TNT1 A 1 A_StopSound(CHAN_5)
		Stop
	}
}



// Needed for the smoke-only rail attack, does absolutely nothing
Actor DummyPuff
{
	+CLIENTSIDEONLY +NONETID
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 3
		Stop
	}
}

Actor RailgunPuff
{
	+NONETID
	+NOINTERACTION
	+ALWAYSPUFF
	+PUFFGETSOWNER
	+EXTREMEDEATH
	+FORCEXYBILLBOARD
	+MTHRUSPECIES
	DamageType "NoDamageToPlayers"
	States
	{
	Spawn:	//hit non bleeding actor
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitBeepBig",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE)
		TNT1 A 0 A_Jump(256, "Crash")
		Goto Crash
	Xdeath:	//hit bleeding actor
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitBeepBig",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE)
		TNT1 A 1
		Stop
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 10 A_PlaySound("QC/Weapons/Railgun/Impact")
		Stop
	}
}

Actor RailgunPuff_Quake1 : RailgunPuff
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_Quake1", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_Quake1", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_Quake2 : RailgunPuff
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_Quake2", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_Quake2", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_Quake4 : RailgunPuff
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_Quake4", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_Quake4", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_ETQW : RailgunPuff
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_ETQW", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_ETQW", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_HalfLife : RailgunPuff
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_HalfLife", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_HalfLife", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_DM : RailgunPuff
{
	-MTHRUSPECIES
	DamageType "Railgun"

	//Medals start
	States
	{
	Xdeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitBeepBig",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE)
		TNT1 A 1
		TNT1 A 0 A_GiveToTarget("DWhammyToken",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE|GIF_SKIPOWNER)
		TNT1 A 1
		TNT1 A 0 A_GiveToTarget("TwoHitsToken",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE|GIF_SKIPOWNER)
		TNT1 A 1
		TNT1 A 0 A_GiveToTarget("RGDamageToken",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE|GIF_SKIPOWNER)
		TNT1 A 10
		TNT1 A 0 A_TakeFromTarget("DWhammyToken",1)
		Stop
	}
	//Medals end
}

Actor RailgunPuff_DM_Quake1 : RailgunPuff_DM
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_Quake1", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_Quake1", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_DM_Quake2 : RailgunPuff_DM
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_Quake2", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_Quake2", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_DM_Quake4 : RailgunPuff_DM
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_Quake4", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_Quake4", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_DM_ETQW : RailgunPuff_DM
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_ETQW", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_ETQW", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunPuff_DM_HalfLife : RailgunPuff_DM
{
	States
	{
	Crash:
		TNT1 A 0 A_SpawnItemEx("RailgunLightFx_HalfLife", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("RailgunPuffFx_HalfLife", 0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::Crash+2
	}
}

Actor RailgunLightFx
{
	+NOINTERACTION
	+FORCEXYBILLBOARD
	+CLIENTSIDEONLY
	+NONETID
	States
	{
	Spawn:
		TNT1 A 1 Light("GreenMediumFlicker1")	Bright
		TNT1 A 1 Light("GreenMediumFlicker1")	Bright
		TNT1 A 1 Light("GreenMediumFlicker2")	Bright
		TNT1 A 1 Light("GreenMediumFlicker2")	Bright
		TNT1 A 1 Light("GreenMediumFlicker3")	Bright
		TNT1 A 1 Light("GreenMediumFlicker3")	Bright
		Stop
	}
}

Actor RailgunLightFx_Quake1
{
	States
	{
	Spawn:
		TNT1 A 1 Light("RedMediumFlicker1")		Bright
		TNT1 A 1 Light("RedMediumFlicker1")		Bright
		TNT1 A 1 Light("RedMediumFlicker2")		Bright
		TNT1 A 1 Light("RedMediumFlicker2")		Bright
		TNT1 A 1 Light("RedMediumFlicker3")		Bright
		TNT1 A 1 Light("RedMediumFlicker3")		Bright
		Stop
	}
}

Actor RailgunLightFx_Quake2
{
	States
	{
	Spawn:
		TNT1 A 1 Light("WhiteMediumFlicker1")	Bright
		TNT1 A 1 Light("WhiteMediumFlicker1")	Bright
		TNT1 A 1 Light("WhiteMediumFlicker2")	Bright
		TNT1 A 1 Light("WhiteMediumFlicker2")	Bright
		TNT1 A 1 Light("WhiteMediumFlicker3")	Bright
		TNT1 A 1 Light("WhiteMediumFlicker3")	Bright
		Stop
	}
}

Actor RailgunLightFx_Quake4
{
	States
	{
	Spawn:
		TNT1 A 1 Light("BlueCyanMediumFlicker1")	Bright
		TNT1 A 1 Light("BlueCyanMediumFlicker1")	Bright
		TNT1 A 1 Light("BlueCyanMediumFlicker2")	Bright
		TNT1 A 1 Light("BlueCyanMediumFlicker2")	Bright
		TNT1 A 1 Light("BlueCyanMediumFlicker3")	Bright
		TNT1 A 1 Light("BlueCyanMediumFlicker3")	Bright
		Stop
	}
}

Actor RailgunLightFx_ETQW
{
	States
	{
	Spawn:
		TNT1 A 1 Light("OrangeMediumFlicker1")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker1")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker2")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker2")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker3")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker3")	Bright
		Stop
	}
}

Actor RailgunLightFx_HalfLife
{
	States
	{
	Spawn:
		TNT1 A 1 Light("OrangeMediumFlicker1")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker1")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker2")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker2")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker3")	Bright
		TNT1 A 1 Light("OrangeMediumFlicker3")	Bright
		Stop
	}
}

Actor RailgunPuffFx
{
	+NOINTERACTION
	+FORCEXYBILLBOARD
	+CLIENTSIDEONLY
	+NONETID
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0.0,1.5,0.0]"
	Scale 0.9
	Alpha 0.99
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_Jump(256,"Type1","Type2","Type3")
	Type1:
		DB63 A 0 A_Jump(255, "EndAnimation")
		Goto EndAnimation
	Type2:
		DB64 A 0 A_Jump(255, "EndAnimation")
		Goto EndAnimation
	Type3:
		DB65 A 0 A_Jump(255, "EndAnimation")
		Goto EndAnimation

	EndAnimation:
		"####" A 0 A_SpawnItemEx("RailgunPuffFxSmoke",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		"####" A 0 A_Jump(128,2)
		"####" A 0 A_SetScale(-0.9,0.9)
		"####" A 0 //nuthn
		"####" ABCDE 1 Bright
		"####" FGHIJK 1 Bright
		"####" LMNOPQRSTUVWXYZ 1 Bright
		Stop
	}
}

Actor RailgunPuffFx_Quake1 : RailgunPuffFx
{
	Translation "0:255=%[0,0,0]:[1.5,0.0,0.0]"

	States
	{
	EndAnimation:
		"####" A 0 A_SpawnItemEx("RailgunPuffFxSmoke_Quake1",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::EndAnimation+1
	}
}

Actor RailgunPuffFx_Quake2 : RailgunPuffFx
{
	Translation "0:255=%[0,0,0]:[0.27,0.57,0.63]"

	States
	{
	EndAnimation:
		"####" A 0 A_SpawnItemEx("RailgunPuffFxSmoke_Quake2",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::EndAnimation+1
	}
}

Actor RailgunPuffFx_Quake4 : RailgunPuffFx
{
	Translation "0:255=%[0,0,0]:[0.24,0.99,1.0]"

	States
	{
	EndAnimation:
		"####" A 0 A_SpawnItemEx("RailgunPuffFxSmoke_Quake4",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::EndAnimation+1
	}
}

Actor RailgunPuffFx_ETQW : RailgunPuffFx
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"

	States
	{
	EndAnimation:
		"####" A 0 A_SpawnItemEx("RailgunPuffFxSmoke_ETQW",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::EndAnimation+1
	}
}

Actor RailgunPuffFx_HalfLife : RailgunPuffFx
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"

	States
	{
	EndAnimation:
		"####" A 0 A_SpawnItemEx("RailgunPuffFxSmoke_HalfLife",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		Goto Super::EndAnimation+1
	}
}

Actor RailgunPuffFxSmoke
{
	+NOINTERACTION
	+FORCEXYBILLBOARD
	+CLIENTSIDEONLY
	+NONETID
	RenderStyle Add
	Translation "0:255=%[0,0,0]:[0.0,1.5,0.0]"
	Scale 0.35
	Alpha 0.99
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_Jump(255,2,3,4,5,6,7,8,9,10,11,12)
		X102 ABCDNOPQRSTUV 0 A_Jump(256,"Ender")
	Ender:
		"####" "####" 1 Bright A_SetScale(scalex+0.1)
	EnderPT2:
		"####" "#" 1 Bright A_FadeOut(0.11)
		"####" "#" 0 A_SetScale(scalex+0.075)
		Loop
	}
}

Actor RailgunPuffFxSmoke_Quake1 : RailgunPuffFxSmoke
{
	Translation "0:255=%[0,0,0]:[1.5,0.0,0.0]"
}

Actor RailgunPuffFxSmoke_Quake2 : RailgunPuffFxSmoke
{
	Translation "0:255=%[0,0,0]:[0.80,0.81,0.82]"
}

Actor RailgunPuffFxSmoke_Quake4 : RailgunPuffFxSmoke
{
	Translation "0:255=%[0,0,0]:[0.24,0.99,1.0]"
}

Actor RailgunPuffFxSmoke_ETQW : RailgunPuffFxSmoke
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"
}

Actor RailgunPuffFxSmoke_HalfLife : RailgunPuffFxSmoke
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"
}


Actor RailgunSmoke
{
	+NOINTERACTION +NOTONAUTOMAP
	+FORCEXYBILLBOARD
	+CLIENTSIDEONLY +NONETID
	Scale 0.4
	RenderStyle Add
	Alpha 0.3
	Translation "0:255=%[0,0,0]:[0.61,0.60,0.54]"
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_Jump(256,"T1","T2","T3","T4")	//to define which graphic will use

	T1:
		DB13 A 0
		Goto PlayOff
	T2:
		DB14 A 0
		Goto PlayOff
	T3:
		DB15 A 0
		Goto PlayOff
	T4:
		DB16 A 0
		Goto PlayOff
	PlayOff:
		"####" A 0 A_Jump(230,2,4,6,8,10)
		"####" ABCDEFGHIJKLMNOPQRSTUVWXYZ 2 Bright
		Stop
	}
}



Actor RailgunTicCounter : Inventory { +SERVERNETID inventory.maxamount 52  inventory.interhubamount 0 }





// ==========================================================================
// ==========================================================================
//	Weapon tokens
// ==========================================================================
// ==========================================================================

Actor RG_UG_Pierce		: Token {}
Actor RG_UG_Explosive	: Token {}
Actor QCRailgunSkin		: Token { Inventory.MaxAmount 20 }

//--------------------------------------------------------------------------------
//--------------------------------------------------------------------------------
//	Upgrade related actors

Actor RailgunExplosivePuffoidWeak : FastProjectile
{
	Speed 4000	//holy crap, im amazed it still works
	Radius 2
	Height 2
	RenderStyle Add
	Damage (random(50,150))
	+BLOODLESSIMPACT
	+RIPPER
	+SEEKERMISSILE
	+THRUACTORS 	//so that it doesnt crash on torches or trees
	+DONTBLAST
	Alpha 0.99
	Scale 0.9
	Obituary "$OB_QCRailGun"
	Translation "0:255=%[0,0,0]:[0,1.2,0]"
	DamageType "NoDamageToPlayers"
	ProjectileKickBack 0
	States
	{
	Spawn:
		TNT1 A 1
		Loop
	Death:
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SeekerMissile(0,0,SMF_LOOK|SMF_CURSPEED,256)
		TNT1 A 0 A_JumpIfTargetInLOS("RadiusHit",360,JLOSF_PROJECTILE,180)
		TNT1 A 0 A_Jump(256,"DeathCont") //for virtual jump to inherited versions
		Goto DeathCont

		RadiusHit:	//splash damage beep
			TNT1 A 0 A_GiveToTarget("HitBeepLow",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE)
			TNT1 A 0 A_Jump(256,"DeathCont") //for virtual jump to inherited versions
			Goto DeathCont

	DeathCont:
		TNT1 A 0 A_Explode(128,160,0)
		TNT1 A 0 A_Jump(255,"T1","T2","T3","T4")
		Goto T1
	T1:
		DB29 A 0 A_SetScale(-0.9,0.9)
		Goto EndAnimation
	T2:
		DB29 A 0
		Goto EndAnimation
	T3:
		DB30 A 0 A_SetScale(-0.9,0.9)
		Goto EndAnimation
	T4:
		DB30 A 0
		Goto EndAnimation
	EndAnimation:
		"####" ABCDE 2 Bright
		"####" FGHIJK 2 Bright
		"####" LMNOPQRSTUVWXYZ 2 Bright A_FadeOut(0.066)
		Stop
	}
}

Actor RailgunExplosivePuffoidWeak_Quake1 : RailgunExplosivePuffoidWeak
{
	Translation "0:255=%[0,0,0]:[1.5,0.0,0.0]"
}

Actor RailgunExplosivePuffoidWeak_Quake2 : RailgunExplosivePuffoidWeak
{
	Translation "0:255=%[0,0,0]:[0.80,0.81,0.82]"
}

Actor RailgunExplosivePuffoidWeak_Quake4 : RailgunExplosivePuffoidWeak
{
	Translation "0:255=%[0,0,0]:[0.24,0.99,1.0]"
}

Actor RailgunExplosivePuffoidWeak_ETQW : RailgunExplosivePuffoidWeak
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"
}

Actor RailgunExplosivePuffoidWeak_HalfLife : RailgunExplosivePuffoidWeak
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"
}

Actor RailgunExplosivePuffoidStrong : FastProjectile
{
	Speed 4000
	Radius 2
	Height 2
	RenderStyle Add
	Damage (random(100,200))
	+BLOODLESSIMPACT
	+RIPPER
	+SEEKERMISSILE
	+THRUACTORS 	//so that it doesnt crash on torches or trees
	+DONTBLAST
	Alpha 0.99
	Scale 1.35
	Obituary "$OB_QCRailGun"
	Translation "0:255=%[0,0,0]:[0,1.2,0]"
	DamageType "NoDamageToPlayers"
	ProjectileKickBack 0
	States
	{
	Spawn:
		TNT1 A 1
		Loop
	Death:
		TNT1 A 0 A_ChangeFlag("NOINTERACTION",1)
		TNT1 A 0 A_Stop
		TNT1 A 0 A_SeekerMissile(0,0,SMF_LOOK|SMF_CURSPEED,256)
		TNT1 A 0 A_JumpIfTargetInLOS("RadiusHit",360,JLOSF_PROJECTILE,268)
		TNT1 A 0 A_Jump(256,"DeathCont") //for virtual jump to inherited versions
		Goto DeathCont

		RadiusHit:	//splash damage beep
			TNT1 A 0 A_GiveToTarget("HitBeepMid",1,AAPTR_DEFAULT,GIF_FORCESERVERSIDE)
			TNT1 A 0 A_Jump(256,"DeathCont") //for virtual jump to inherited versions
			Goto DeathCont

	DeathCont:
		TNT1 A 0 A_Explode(random(160,250),256,0)
		TNT1 A 0 A_Jump(255,"T1","T2","T3","T4")
		Goto T1
	T1:
		DB42 A 0 A_SetScale(-1.35,1.35)
		Goto EndAnimation
	T2:
		DB42 A 0
		Goto EndAnimation
	T3:
		DB43 A 0 A_SetScale(-1.35,1.35)
		Goto EndAnimation
	T4:
		DB43 A 0
		Goto EndAnimation
	EndAnimation:
		"####" ABCDE 2 Bright
		"####" FGHIJK 2 Bright
		"####" LMNOPQRSTUVWXYZ 2 Bright A_FadeOut(0.066)
		Stop
	}
}

Actor RailgunExplosivePuffoidStrong_Quake1 : RailgunExplosivePuffoidStrong
{
	Translation "0:255=%[0,0,0]:[1.5,0.0,0.0]"
}

Actor RailgunExplosivePuffoidStrong_Quake2 : RailgunExplosivePuffoidStrong
{
	Translation "0:255=%[0,0,0]:[0.80,0.81,0.82]"
}

Actor RailgunExplosivePuffoidStrong_Quake4 : RailgunExplosivePuffoidStrong
{
	Translation "0:255=%[0,0,0]:[0.24,0.99,1.0]"
}

Actor RailgunExplosivePuffoidStrong_ETQW : RailgunExplosivePuffoidStrong
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"
}

Actor RailgunExplosivePuffoidStrong_HalfLife : RailgunExplosivePuffoidStrong
{
	Translation "0:255=%[0,0,0]:[0.82,0.51,0.02]"
}



Actor RGPierceBeamProjectile
{
	Projectile
	Radius 1
	Height 1
	ReactionTime 6
	+NOINTERACTION
	+EXTREMEDEATH
	+NODAMAGETHRUST
	Speed 50
	Scale 1.0
	RenderStyle None
	DamageType "NoDamageToPlayers"
	ProjectileKickBack 0
	+DONTBLAST
	States
	{
	Spawn:
		PLAY A 0 NODELAY A_Jump(256, "DoExplode")
		Goto DoExplode

	DoExplode:
		PLAY A 0 A_Explode(random(50,100),64,0,0,64)
		PLAY A 0 A_Jump(256, "DoFX")
		Goto DoFX

	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown

	DoCountdown:
		PLAY A 0 A_Countdown
		PLAY A 0 A_Jump(256, "DoExplode")
		Goto DoExplode
	}
}

Actor RGPierceBeamProjectile_Quake1: RGPierceBeamProjectile
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_Quake1",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectile_Quake2: RGPierceBeamProjectile
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_Quake2",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectile_Quake4: RGPierceBeamProjectile
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_Quake4",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectile_ETQW: RGPierceBeamProjectile
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_ETQW",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectile_HalfLife: RGPierceBeamProjectile
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_HalfLife",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectileStrong : RGPierceBeamProjectile
{
	Scale 0.6
	States
	{
	DoExplode:
		PLAY A 0 A_Explode(random(75,125),72,0,0,72)
		PLAY A 0 A_Jump(256, "DoFX")
		Goto DoFX
	}
}

Actor RGPierceBeamProjectileStrong_Quake1: RGPierceBeamProjectileStrong
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_Quake1",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectileStrong_Quake2: RGPierceBeamProjectileStrong
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_Quake2",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectileStrong_Quake4: RGPierceBeamProjectileStrong
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_Quake4",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectileStrong_ETQW: RGPierceBeamProjectileStrong
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_ETQW",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RGPierceBeamProjectileStrong_HalfLife: RGPierceBeamProjectileStrong
{
	States
	{
	DoFX:
		PLAY A 1 A_SpawnItemEx("RailgunPierceTrail_HalfLife",0,0,0, 0,0,0, 0,SXF_NOCHECKPOSITION)
		PLAY A 0 A_Jump(256, "DoCountdown")
		Goto DoCountdown
	}
}

Actor RailgunPierceTrail
{
	+NOINTERACTION
	+CLIENTSIDEONLY
	+NONETID
	Scale 0.8
	RenderStyle Add
	Alpha 0.66
	States
	{
	Spawn:
		RGBM D 1 A_FadeOut(0.04)
		Loop
	}
}

Actor RailgunPierceTrail_Quake1 : RailgunPierceTrail
{
	States
	{
	Spawn:
		RGB1 D 1 A_FadeOut(0.04)
		Loop
	}
}

Actor RailgunPierceTrail_Quake2 : RailgunPierceTrail
{
	States
	{
	Spawn:
		RGB2 D 1 A_FadeOut(0.04)
		Loop
	}
}

Actor RailgunPierceTrail_Quake4 : RailgunPierceTrail
{
	States
	{
	Spawn:
		RGB4 D 1 A_FadeOut(0.04)
		Loop
	}
}

Actor RailgunPierceTrail_ETQW : RailgunPierceTrail
{
	States
	{
	Spawn:
		RGB5 D 1 A_FadeOut(0.04)
		Loop
	}
}

Actor RailgunPierceTrail_HalfLife : RailgunPierceTrail
{
	States
	{
	Spawn:
		RGB7 D 1 A_FadeOut(0.04)
		Loop
	}
}



// --------------------------------------------------------------------------
//	For competitive DM, weapons dont autoaim
// --------------------------------------------------------------------------
Actor QCRailGunDM : QCRailGun
{
	+WEAPON.NOAUTOAIM
	+CHEATNOTWEAPON
	Tag "$TAG_QCRailGun" // "Railgun (DM)"
	Weapon.AmmoGive1 10
	Weapon.AmmoDmScale 1.0
	Weapon.AmmoDmRefill 1
}
